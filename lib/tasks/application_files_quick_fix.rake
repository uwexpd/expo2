desc "Fix missing essay file name"
  task :fix_files => :environment do

    # blank_app_files = ApplicationFile.where(id: [162029, 158537, 159117, 159672, 161801, 162433, 161396, 161253, 159024, 161882, 161772, 160827, 160290, 162575, 162793, 161259, 160566, 160385, 159796, 159917, 163005, 161674, 160392, 160941, 159190, 160417, 161656, 161879, 160352, 160192, 160784, 158986, 162161, 158477, 158738, 160778, 158891, 160705, 159071, 158726, 158535, 158749, 158954, 158675, 159926, 158661, 158833, 161255, 162709, 160429, 158903, 160690, 162228, 159274, 160222, 160801, 162394, 160089, 160682, 158689, 161390, 161291, 158581, 159396, 159251, 162905, 159837, 161943, 160475, 162230, 161756, 160400, 158740, 158874, 159285, 159957, 159883, 160590, 162383, 159878, 161463, 159861, 161023, 160154, 161042, 160794, 160811, 158742, 159930, 160764, 162581, 159723, 162928, 160564, 160945, 161845, 159211, 162547, 161744, 158842, 160013, 161288, 162549, 158525, 159994, 160866, 160170, 159670, 160367, 161842, 158479, 160833, 161579, 161277, 158923, 159830, 160073, 161803, 159907, 162364, 161036, 160578, 159677, 158563, 160845, 162938, 162467, 159835, 159668, 162089, 160350, 159056, 160025, 160093, 161133, 160718, 159601, 160919, 158483, 161731, 163030, 161712, 158629, 159959, 161913, 158620, 162341, 160415, 162171, 159901] )

    puts "There are #{blank_app_files.size} files do not have file name"

    blank_app_files.each do |blank_file|      

      if blank_file.read_attribute(:file).blank?
        puts "file attribute is blank => #{blank_file.id}"
        # update to like this: 135553-Essayfile.pdf
        blank_file.update_column(:file, "#{blank_file.application_for_offering.id}-Essayfile.pdf")
      end

    end


  end
